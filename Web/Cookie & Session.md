# 내가 만든 쿠키~ 

## Cookie

클라이언트의 IP 주소와 User-Agent는 매번 변경될 수 있는 고유하지 않은 정보일 뿐만 아니라, HTTP 프로토콜의 Connectionless 와 Stateless 특징 때문에 웹 서버는 클라이언트를 기억할수 없다.

Connectionless, Stateless 특성을 가지는 HTTP에서 상태를 유지하기 위해 쿠키가 탄생함.

쿠키는 Key 와 Value로 이루어진 일종의 단위다. 

서버가 클라이언트에게 쿠키를 발급하면, 클라이언트는 서버에 요청을 보낼때 마다 쿠키를 같이 전송한다. 서버는 클라이언트의 요청에 포함된 쿠키를 확인해 클라이언트를 구분할수 있다. 

일반적으로 쿠키는 클라이언트 정보 기록과 상태 정보를 표현하는 용도로 사용한다.

## 정보기록 

웹 서비스 사용시 종종 등장하는 팝업창에 "다시 보지 않기", "7일간 표시하지 않기" 버튼이 있는것을 확인할수 있다. 

웹 서버는 각 클라이언트의 팝업 옵션을 기억하기 위해 쿠키에 해당 정보를 기록하고, 쿠키를 통해 팝업창 표시 여부를 판단한다. 과거에는 클라이언트의 정보를 저장하기 위해 쿠기가 종종 사용 됐다. 

쿠키는 서버와 통신할때 마다 전송되기 때문에 쿠키가 필요없는 요청을 보낼때 리소스가 낭비 될수 있음.


## HTTP 프로토콜의 특징 

- Connectionless: 하나의 요청에 하나의 응답을 한 후 연결을 종료하는 것을 의미한다. 특정 요청에 대한 연결은 이후 요청과 이어지지 않고 새 요청이 있을때마다 항상 새로운 연결을 해야됨 
- Stateless: 통신이 끝난 후 상태 정보를 저장하지 않는 것을 의미한다. 이전 연결에서 사용한 데이터를 다른 연결에서 요구할수 없다. 

## 쿠키가 없는 통신 

![image](https://user-images.githubusercontent.com/79100627/206865394-e851ad61-920e-4ef2-99f9-4c7896e7d887.png)

## 쿠키가 있는 통신 

![image](https://user-images.githubusercontent.com/79100627/206865406-3bedd097-1c5b-4412-b79d-00868e75d979.png)

## 세션 

쿠키에 인증 상태를 저장하지만 클라이언트가 인증 정보를 변조할수 없게 하기 위해서 Session을 사용한다.

세션은 인증 정보를 서버에 저장하고 해당 데이터에 접근할수 있는 키를 만들어 클라이언트에 전달하는 방식으로 작동된다. 해당 키를 일반적으로 Session ID 라고 한다. 브라우저는 해당 키를 쿠키에 저장하고 이후에 HTTP 요청을 보낼떄 사용한다. 

![image](https://user-images.githubusercontent.com/79100627/206865590-6741b28f-7991-49c8-b5dd-4dbd13042269.png)
![image](https://user-images.githubusercontent.com/79100627/206865605-a8a219e9-6117-4d17-b06e-197a4a75d7af.png)


## 세션 예시

![image](https://user-images.githubusercontent.com/79100627/206865688-d0c7e582-05a3-443e-a8d0-60d51355e8ef.png)

쿠키 Guest 일떄 

![image](https://user-images.githubusercontent.com/79100627/206865707-342e8d03-dcbf-4b0c-8c88-c2c9dff122e7.png)

세션 스토리지에 저장되는 상태 

## 쿠키와 세션의 차이점

쿠키는 데이터 자체를 사용자가 저장하며 세션은 서버가 저장한다.

## 쿠키 적용법 

쿠키는 클라이언트의 저장되기 떄문에 클아이언트는 저장된 쿠키를 조회, 수정, 추가를 할수있다. 클라이언트가 서버에 요청을 보낼때 저장된 쿠키를 요청 헤더에 넣어 전송하기 때문에 이용자가 요청을 보낼때 쿠키 헤더를 변조할수 있다. 쿠키를 설정할때에는 만료기간을 지정할수 있고 만료시간 이후에는 클라이언트에서 쿠키는 삭제가 된다 

쿠키는 서버와 클라이언트 둘다 설정할수 있다. 설정 방법은 아래와 같음 

![image](https://user-images.githubusercontent.com/79100627/206865864-4bda95ce-d217-49c6-9900-6d230f537629.png)

![image](https://user-images.githubusercontent.com/79100627/206865876-8f914d99-5d54-49ff-a66e-901b27d4bed6.png)


